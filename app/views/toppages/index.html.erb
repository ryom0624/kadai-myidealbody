<% if logged_in? %>
  <div class="row">
    <div class="col m4">
      <div class="card">
        <div class="card-content">
          <div class="btn-floating btn-medium waves-effect waves-light blue lighten-3 center-align">
            <%= link_to new_log_path do %><i class="material-icons">add</i><% end %>
          </div>
          <span style="margin-left:10px; font-size:18px">本日の体重を入力する</span>
        </div>
      </div>
    </div>
  </div>

  <% unless current_user.goal.present? %>
    <div class="row">
      <div class="col m4 offset-m4">
        <div class="card">
          <div class="card-content">
            <div class="btn-floating btn-medium waves-effect waves-light orange darken-1 center-align">
              <%= link_to new_goal_path do %><i class="material-icons">add</i><% end %>
            </div>
            <span style="margin-left:10px; font-size:18px">目標を設定しよう</span>
          </div>
        </div>
      </div>
    </div>
  <% else %>
    <div class="row">
      <h3 class="header">目標</h3>
      <div class="col s12 m12">
        <div class="card horizontal">
          <div class="card-image">
            <%= image_tag current_user.goal.image %>
          </div>
          <div class="card-stacked" >
            <div class="card-content table-responsive">
              <table class="centered">
                <thead>
                  <tr>
                    <th>期日</th>
                    <th>体重</th>
                    <th>体脂肪率</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><%= @goal.date.strftime("%Y/%m/%d") %></td>
                    <td><%= @goal.weight %>kg</td>
                    <td><%= @goal.fat %>%</td>
                  </tr>
                </tbody>
              </table>          
            </div>
            <div class="card-action center-align">
              <%= link_to edit_goal_path(current_user.goal) do %><i class="material-icons">edit<span>編集</span></i><% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>

  <% unless @logs.present? %>
  <% else %>
    <h3 class="header">ログ</h3>
      <% @logs.each do |log| %>
        <div class="col s12 m12">
          <div class="card horizontal">
            <div class="card-image">
              <%= image_tag log.image  %>
            </div>
            <div class="card-stacked" >
              <div class="card-content table-responsive">
                <table class="centered">
                  <thead>
                    <tr>
                      <th>日付</th>
                      <th>体重</th>
                      <th>体脂肪率</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><%= log.date.strftime("%Y/%m/%d") %></td>
                      <td><%= log.weight %>kg</td>
                      <td><%= log.fat %>%</td>
                    </tr>
                  </tbody>
                </table>          
              </div>
              <div class="card-action center-align">
                <%= link_to edit_log_path(log) do %><i class="material-icons">edit<span>編集</span></i><% end %>
                <%= link_to log_path(log), method: :delete, data: {confirm: "削除してもよろしいですか?"} do %><i class="material-icons">clear<span>削除</span></i><% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <%= paginate @logs %>
  <% end %>

<% else %>
  <div class="center jumbotron">
    <div class="text-center">
      <h1>My Ideal Body</h1>
      <h3>あなたの理想のカラダへ</h3>
      <%= link_to "新規登録", signup_path, class:"btn btn-info btn-lg" %>
    </div>
  </div>
<% end %>

